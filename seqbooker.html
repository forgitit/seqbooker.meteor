<head>
  <title>SeqBooker Calendar</title>
</head>

<template name="layout">
    {{yield}}
</template>


<template name="main">
    {{#unless ready}}
    <div id="loader">
            <div>
                <h1>SeqBooker is initialising...<br /><br />
                    <img src="/images/loader.gif" alt="loading" /></h1>
                <h3>Just a moment</h3>
            </div>
        </div>
    {{/unless}}
    <div class="row">
        <div class="span9 center">
            <h1>SeqBooker <small><span class="atype">s</span><span class="ttype">e</span><span class="ttype">q</span><span
                                    class="ctype">u</span><span class="atype">e</span><span class="gtype">n</span><span
                                    class="gtype">c</span><span class="ctype">e</span> resource booking calendar</small><span>{{> login}}</span></h1>
            <div id="cal_wrapper">
                {{> cal}}
                {{> control_panel}}
            </div>
            {{> notify}}
            {{> booking_form}}
            {{> booking_info}}
            <div id="help-info">
                <h5>For help or reporting bugs/feature requests please contact <a
                        href="mailto:hayden.walker@uwa.edu.au">Seqbooker Admin</a></h5>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="span9 center">
            {{> admin}}
        </div>
    </div>
    </template>

<template name="login">
    <div id="login-widget">
        <div>
            <button class="btn btn-link" id="{{#unless logged_in}}login{{else}}logout{{/unless}}">{{#if logged_in}}{{logged_in}}{{else}}sign-in{{/if}}</button>
            <form id="sign-in-form">
                <button class="btn btn-link close-sign-in">close</button>
                <fieldset>
                    <legend>Sign In</legend>
                    <label>Email address:</label>
                    <input type='text' name='email_address' autocomplete="off" placeholder='enter email address' />
                    <label>Password:</label>
                    <input type="password" name='password' placeholder='enter your password' />
                    <button class="btn btn-primary" id="submit-login">Submit</button>
                    <button class="btn btn-link" id="request-forgot-password">Forgot password</button><button class="btn btn-link"
                        id="account-create">Create
                        account</button>
                   {{#if loggingIn}}<h3>Logging in<img src="/images/login_loader.gif" /></h3>{{/if}}
                    <span></span>
                </fieldset>
            </form>
            <form id="sign-out-form">
                <button class="btn btn-link close-sign-in">close</button>
                <legend>Sign Out</legend>
                <button class="btn btn-warning" id="submit-logout">Sign-out</button>
                <button class="btn btn-info" id="request-change-password">Change password</button>
            </form>
            <form id="create-account-form">
                <button class="btn btn-link close-sign-in">close</button>
                <fieldset>
                    <legend>Create account</legend>
                    <small>Please provide an email address to use for your account. You will receive a verification email that will allow
                        you to set a password to use the booking system</small>
                    <label>Email address:</label>
                    <input type='text' name='email_address' autocomplete="off" placeholder='enter email address' />
                    <button class="btn btn-primary" id="submit-account">Submit</button>
                    <span></span>
                </fieldset>
            </form>
            <form id="change-password-form">
                <button class="btn btn-link close-sign-in">close</button>
                <fieldset>
                    <legend>Change password</legend>
                    <label>Old password:</label>
                    <input type="password" name='old_password' placeholder='enter your existing password' />
                    <label>New password:</label>
                    <input type="password" name='new_password' placeholder='enter your new password' />
                    <button class="btn btn-warning" id="submit-password-change">Submit</button>
                    <small>Your old password did not match!</small>
                </fieldset>
            </form>
        </div>
    </div>
</template>

<template name="admin">
{{#if info}}
    <div id="admin">
        <h3>Admin Panel</h3>
        <button class="btn btn-danger destroy">Remove all bookings</button>
        <button class="btn btn-info show_view_bookings">Show all bookings</button>
    </div>
    <div id="admin_info">
        <ul>
        <li>{{info}}</li>
        </ul>
    </div>
{{/if}}
</template>

<template name="notify">
    <div id="notify-container">
        {{#if notify}}
        <div class="notify-placeholder">
            <div class="ui-widget" id="notify">
                <div class="ui-state-highlight ui-corner-all">
                    <strong>Notice: </strong>{{notify}}
                </div>
            </div>
        </div>
        {{/if}}
    </div>
</template>

<template name="cal">
    <div id="top-toolbar" class="ui-toolbar  ui-widget-all">
        <a href="#" class="prev-month" id="go-prev"><span class="ui-icon ui-icon-circle-triangle-w prev-month"></span> Prev
        Month</a>
    <span class="month"><div id="curr-month" title="Click to return to current month"><a href="#" >{{calendar.strMonth}}
                {{calendar.year}}</a></div></span>
        <a href="#" class="next-month" id="go-next"><span class="ui-icon ui-icon-circle-triangle-e next-month"></span> Next
            Month</a>
    </div>
    <table class='table table-bordered {{#if bookable}}bookable{{/if}}' id="calendar">
        <tr class="day-names">
            <th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th>
        </tr>
        
        {{{calendar.html}}}
    </table>
</template>

<template name="control_panel">
    <div id="cp" class="ui-toolbar  ui-widget-all">
        <h6 class="count">There are {{count}} bookings in the current view</h6>
        {{#if currentUser}}
        <button class="btn btn-info ui-corner-all" id="btn-info">Info</button>
        {{#if bookable}}
        <button class="btn ui-corner-all btn-unbook btn-warning" id="btn-unbook">Unbook</button>
        <button class="btn ui-corner-all btn-book btn-primary" id="btn-book">Book</button>
        {{/if}}
        {{else}}
        <h5 class="login">Login to book/unbook</h5>
        {{/if}}
        <div id="seq-selector">
            <a href="#" class="seq-select" title="Select HiSeq"><img src="/images/hiseq_1000.jpg" id="hiseq" alt="hiseq"  /></a>
            <a href="#" class="seq-select" title="Select MiSeq"><img src="/images/miseq.jpg" id="miseq" alt="miseq"  /></a>
            <h5>{{#if selected}}<strong>{{selected}} selected </strong>{{else}}Select your
            sequencer: {{/if}}</h5>
        </div>
    </div>
</template>

<template name="booking_form">
    {{#if book_form}}
    <div class="ui-overlay">
        <div class="ui-widget-overlay">
        </div>
    </div>
    <div id="booking-form" >
        <form>
            <fieldset>
                <legend>Enter Booking Information</legend>
                <div class="invalid">
                    <small>Please fill out all fields!</small>
                </div>
                <label>Booking contact name:</label>
                <input type="text" name="contact_name" placeholder="Enter contact name" autofocus><br />
                <label>Booking contact phone:</label>
                <input type="text" name="contact_phone" placeholder="Enter contact number"><br />
                <label>Booking description:</label>
                <input type="text" name="project_desc" placeholder="Enter booking description"><br />
                <label>Upload sample sheet:</label>
                <input type="file" name="sample_sheet" /><br /><br />
                <button class="btn btn-primary" id="booking-submit" >Submit booking</button>
                <button class="btn btn-warning" id="booking-cancel">Cancel booking</button>
            </fieldset>
        </form>
    </div>
    {{/if}}
    </template>

<template name="booking_info">
    {{#if info}}
    <div class="ui-overlay">
        <div class="ui-widget-overlay">
        </div>
    </div>
    <div id ="booking-info">
        <div>
            <legend>Booking details</legend>
            <h3><span>Booking dates:</span> {{info.beginDate}} - {{info.endDate}}</h3>
            <h3><span>Contact name:</span> {{info.contactName}}</h3>
            <h3><span>Contact phone:</span> {{info.contactPhone}}</h3>
            <h3><span>Project description: </span>{{info.projectDesc}}</h3>
            <button class="btn btn-default" id="info-close">Close</button>
        </div>
    </div>
    {{/if}}
</template>

<template name="enroll">
    <div class="row" id="enroll">
        <div class="span9 center">
            <h1>SeqBooker <small><span class="atype">s</span><span class="ttype">e</span><span class="ttype">q</span><span
                                    class="ctype">u</span><span class="atype">e</span><span class="gtype">n</span><span
                                    class="gtype">c</span><span class="ctype">e</span> resource booking calendar</small></h1>
            <h4>Enter a password and confirm it to finalise your account. You will be taken to the booking system
                automatically on submission.</h4>
            <label>New password: </label><input type="password" name="password" placeholder="enter new password"></input><span id="pass-error"></span>
            <label>Confirm new password: </label><input type="password" name="confirm" placeholder="confirm password"></input><span id="confirm-error"></span>
            <br />
            <button class="btn btn-submit">Submit</button>
        </div>
    </div>
</template>


<template name="verified">
    <h1>Your account has been verified!</h1>
</template>
